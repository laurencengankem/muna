<app-header (txt)="search($event)"></app-header>
<app-loader *ngIf="!b"></app-loader>
<div id="cnx" style="display: none;text-align: center; margin-top: 10%;">
    <p style="font-weight: bold;">Check your internet connection</p>
    <svg style="margin-left:250px; height:350px;width:350px" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M5 5L19 19" stroke="#000000" stroke-width="2" stroke-linecap="round"></path> <path fill-rule="evenodd" clip-rule="evenodd" d="M7.19222 6.10634C7.18748 6.10865 7.18274 6.11095 7.178 6.11327C5.61777 6.87424 4.25979 7.99367 3.21509 9.38003C2.88272 9.82111 2.97084 10.4481 3.41191 10.7805C3.85299 11.1129 4.47999 11.0247 4.81236 10.5837C5.66712 9.44937 6.77819 8.53347 8.05474 7.91085C8.2694 7.80616 8.48772 7.71025 8.70914 7.62326L7.19222 6.10634ZM10.2743 9.18837C9.66024 9.32403 9.06223 9.53207 8.49312 9.80965C7.3584 10.3631 6.37078 11.1772 5.611 12.1855C5.27863 12.6266 5.36675 13.2536 5.80782 13.5859C6.24889 13.9183 6.8759 13.8302 7.20827 13.3891C7.77811 12.6329 8.51882 12.0223 9.36986 11.6072C10.2154 11.1948 11.146 10.9871 12.0865 11.0006L10.2743 9.18837ZM17.8876 13.9733L12.9738 9.05948C13.9447 9.17853 14.888 9.47497 15.7559 9.93642C16.8706 10.5291 17.8292 11.3772 18.5533 12.4114C18.8701 12.8638 18.7601 13.4873 18.3077 13.8041C18.178 13.8949 18.0342 13.9507 17.8876 13.9733ZM10.9731 7.05879L9.26083 5.34653C10.2147 5.10125 11.2006 4.98437 12.1921 5.00168C13.9277 5.03197 15.6316 5.47261 17.1643 6.28758C18.697 7.10254 20.0151 8.26868 21.0108 9.69066C21.3275 10.1431 21.2176 10.7666 20.7652 11.0834C20.3128 11.4002 19.6892 11.2902 19.3725 10.8378C18.5578 9.67438 17.4794 8.72026 16.2253 8.05347C14.9713 7.38669 13.5772 7.02616 12.1572 7.00137C11.7605 6.99445 11.365 7.01377 10.9731 7.05879ZM13.0001 18C13.0001 17.4477 12.5524 17 12.0001 17C11.4478 17 11.0001 17.4477 11.0001 18C11.0001 18.5523 11.4478 19 12.0001 19C12.5524 19 13.0001 18.5523 13.0001 18ZM10.2466 13.4048C10.814 13.1281 11.4387 12.9896 12.0699 13.0006C12.701 13.0116 13.3206 13.1719 13.878 13.4682C14.4353 13.7646 14.9146 14.1886 15.2767 14.7057C15.5935 15.1581 15.4835 15.7816 15.0311 16.0984C14.5787 16.4152 13.9552 16.3053 13.6384 15.8528C13.4574 15.5943 13.2177 15.3823 12.939 15.2341C12.6604 15.0859 12.3506 15.0058 12.035 15.0003C11.7194 14.9948 11.407 15.0641 11.1233 15.2024C10.8397 15.3408 10.5928 15.5443 10.4028 15.7964C10.0704 16.2374 9.44344 16.3256 9.00236 15.9932C8.56129 15.6608 8.47317 15.0338 8.80554 14.5927C9.18543 14.0886 9.67924 13.6815 10.2466 13.4048Z" fill="#000000"></path> </g></svg>
</div>
<div id="found" style="display: none;text-align: center; margin-top: 10%;">
    <p style="font-weight: bold;">No results found</p>
    <svg fill="#000000" style=" height:100px;width:100px" viewBox="0 0 1920 1920" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M213.333 960c0-167.36 56-321.707 149.44-446.4L1406.4 1557.227c-124.693 93.44-279.04 149.44-446.4 149.44-411.627 0-746.667-335.04-746.667-746.667m1493.334 0c0 167.36-56 321.707-149.44 446.4L513.6 362.773c124.693-93.44 279.04-149.44 446.4-149.44 411.627 0 746.667 335.04 746.667 746.667M960 0C429.76 0 0 429.76 0 960s429.76 960 960 960 960-429.76 960-960S1490.24 0 960 0" fill-rule="evenodd"></path> </g></svg>
</div>


<div *ngIf="items.length>0">

    <div id="phn">
        <div id="cart-icon" class="dropdown">
            <button id="price" class="dropbtn">Price</button>
            <div class="dropdown-content">
                <form [formGroup]="priceForm" (submit)="filter('price')">
                    <table style="width:100%; padding: 10px; margin-bottom: 10px;">
                        <tr>
                            <th style="text-align: right;">From</th>
                            <td><input type="number" style="width:100px" formControlName="from"  oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*?)\..*/g, '$1');"></td>
                        </tr>
                        <tr>
                            <th style="text-align: right;">To</th>
                            <td><input type="number" style="width:100px"  formControlName="to" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*?)\..*/g, '$1');"></td>
                        </tr> 
                        <br>
                        <tr>
                            <td colspan="2" style="text-align: center;"><input type="submit" value="save"></td>
                        </tr>
                      </table>
                </form>
            </div>
        </div>
        <div id="cart-icon" class="dropdown" *ngIf="categories.length>1">
            <button  id="category" class="dropbtn">Category</button>
            <div class="dropdown-content " (submit)="filter('category')">
                <form [formGroup]="categoryForm">
                    <div *ngFor="let cat of categories">
                        <input type="checkbox" id="" name="{{cat}}" [value]="cat" (change)="onCheckboxChange($event)">
                        {{cat}}<br>
                    </div>
                    <br>
                    <input type="submit" value="save">
                </form>
            </div>
        </div>
        <div id="cart-icon" class="dropdown">
            <button class="dropbtn">Order</button>
            <div class="dropdown-content">
               <form (submit)="ordertheProducts()">
                <input type="radio" id="asc" name="order" value="asc" [formControl]="order">
                <label for="asc">ascending price</label> <br>
                <input type="radio" id="desc" name="order" value="desc" [formControl]="order">
                <label for="desc">descending price</label> <br><br>
                <input type="submit" style="margin-left: 45%;" value="save">
               </form> 
            </div>
        </div>
    </div>

    <p style="text-align: center; font-size: 1.2em ; margin-top: 20px;"> {{filtered.length}} products found </p>

    <div id="results" >
        <app-card-item *ngFor="let item of filtered; let i=index" [item]="item"></app-card-item>
    </div>
</div>